!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-btn",inactiveButtonClass:"modal__save-btn_grey_out",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},t=(e,t,o)=>{const n=e.querySelector(`#${t.id}-error`);t.classList.remove(o.inputErrorClass),n&&(n.textContent="")},o=(e,t,o)=>{(e=>e.some((e=>!e.validity.valid)))(e)?n(t,o):(t.disabled=!1,t.classList.remove(o.inactiveButtonClass))},n=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},r=e=>{document.querySelectorAll(e.formSelector).forEach((n=>{((e,n)=>{const r=Array.from(e.querySelectorAll(n.inputSelector)),a=e.querySelector(n.submitButtonSelector);o(r,a,n),r.forEach((s=>{s.addEventListener("input",(()=>{((e,o,n)=>{o.validity.valid?t(e,o,n):((e,t,o,n)=>{const r=e.querySelector(`#${t.id}-error`);r&&(t.classList.add(n.inputErrorClass),r.textContent=o)})(e,o,o.validationMessage,n)})(e,s,n),o(r,a,n)}))}))})(n,e)}))};r(e);const a=document.querySelector(".profile__edit-btn"),s=document.querySelector(".profile__post-btn"),c=document.querySelector("#edit-modal"),l=c.querySelector(".modal__close-btn"),i=document.querySelector(".profile__name"),d=document.querySelector(".profile__description"),u=c.querySelector("#name"),m=c.querySelector("#description"),p=c.querySelector(".modal__form"),_=document.querySelector("#card-template"),y=document.querySelector(".cards__list"),v=document.querySelector("#add-card-modal"),f=v.querySelector(".modal__close-btn"),S=v.querySelector(".modal__save-btn"),g=v.querySelector(".modal__form"),q=v.querySelector("#add-card-link"),w=v.querySelector("#caption"),h=document.querySelector("#modal-preview"),b=h.querySelector(".modal__image"),k=h.querySelector(".modal__caption"),E=h.querySelector(".modal__close-btn_preview");function L(e){const t=_.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__title"),n=t.querySelector(".card__image"),r=t.querySelector(".card__like-btn"),a=t.querySelector(".card__delete-btn");return o.textContent=e.name,n.src=e.link,n.alt=e.name,r.addEventListener("click",(()=>{r.classList.toggle("card__like-btn_liked")})),n.addEventListener("click",(()=>{z(h),b.src=e.link,k.textContent=e.name,b.alt=e.name})),a.addEventListener("click",(()=>{t.remove()})),t}function x(e){if("Escape"===e.key){const e=document.querySelector(".modal_opened");e&&j(e)}}function C(e){e.target.classList.contains("modal_opened")&&j(e.target)}function z(e){e.classList.add("modal_opened"),document.addEventListener("keydown",x),e.addEventListener("mousedown",C)}function j(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",x),e.removeEventListener("mousedown",C)}a.addEventListener("click",(()=>{var o,n;u.value=i.textContent,m.value=d.textContent,z(c),o=p,n=e,[u,m].forEach((e=>{t(o,e,n)}))})),l.addEventListener("click",(()=>{j(c)})),p.addEventListener("submit",(function(e){e.preventDefault(),i.textContent=u.value,d.textContent=m.value,j(c)})),g.addEventListener("submit",(function(t){t.preventDefault();const o=L({name:w.value,link:q.value});y.prepend(o),t.target.reset(),disableButton(S,e),j(v)})),s.addEventListener("click",(()=>{z(v)})),f.addEventListener("click",(()=>{j(v)})),E.addEventListener("click",(()=>{j(h)})),[{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Golden Gate Bridge",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/7-photo-by-griffin-wooldridge-from-pexels.jpg"}].forEach((e=>{const t=L(e);y.prepend(t)})),r(e)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU03QixFQUFjRixFQUFlK0IsR0FDbkMxQyxFQUFVd0MsUUFBUTNCLEVBQVksSUFHaENuQyxFQUFpQjVCLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3NjcmlwdHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlLWJ0blwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zYXZlLWJ0bl9ncmV5X291dFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JcIixcbn07XG5cbmNvbnN0IHNob3dJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yTXNnRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICk7XG4gIGlmIChlcnJvck1zZ0VsZW1lbnQpIHtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1zZ0VsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gIH1cbn07XG5cbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBjb25zdCBlcnJvck1zZ0VsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICApO1xuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgaWYgKGVycm9yTXNnRWxlbWVudCkge1xuICAgIGVycm9yTXNnRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH1cbn07XG5cbmNvbnN0IGNoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpID0+IHtcbiAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICBzaG93SW5wdXRFcnJvcihcbiAgICAgIGZvcm1FbGVtZW50LFxuICAgICAgaW5wdXRFbGVtZW50LFxuICAgICAgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLFxuICAgICAgY29uZmlnXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICB9XG59O1xuXG5jb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XG4gIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXQpID0+IHtcbiAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xuICB9KTtcbn07XG5cbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGlmIChoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgIGRpc2FibGVCdXR0b24oYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcbiAgfSBlbHNlIHtcbiAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgfVxufTtcblxuY29uc3QgZGlzYWJsZUJ1dHRvbiA9IChidXR0b25FbGVtZW50LCBjb25maWcpID0+IHtcbiAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVzZXRWYWxpZGF0aW9uID0gKGZvcm1FbGVtZW50LCBpbnB1dExpc3QsIGNvbmZpZykgPT4ge1xuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXQsIGNvbmZpZyk7XG4gIH0pO1xufTtcblxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpXG4gICk7XG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3Rvcik7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQsIGNvbmZpZyk7XG4gIH0pO1xufTtcblxuZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG5pbXBvcnQge1xuICBlbmFibGVWYWxpZGF0aW9uLFxuICBzZXR0aW5ncyxcbiAgcmVzZXRWYWxpZGF0aW9uLFxufSBmcm9tIFwiLi4vc2NyaXB0cy92YWxpZGF0aW9uXCI7XG5cbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiVmFsIFRob3JlbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMS1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlJlc3RhdXJhbnQgdGVycmFjZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8yLXBob3RvLWJ5LWNlaWxpbmUtZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkFuIG91dGRvb3IgY2FmZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8zLXBob3RvLWJ5LXR1YmFudXItZG9nYW4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkEgdmVyeSBsb25nIGJyaWRnZSwgb3ZlciB0aGUgZm9yZXN0IGFuZCB0aHJvdWdoIHRoZSB0cmVlc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy80LXBob3RvLWJ5LW1hdXJpY2UtbGFzY2hldC1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVHVubmVsIHdpdGggbW9ybmluZyBsaWdodFwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy81LXBob3RvLWJ5LXZhbi1hbmgtbmd1eWVuLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJNb3VudGFpbiBob3VzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy82LXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiR29sZGVuIEdhdGUgQnJpZGdlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzctcGhvdG8tYnktZ3JpZmZpbi13b29sZHJpZGdlLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuXTtcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ0blwiKTtcbmNvbnN0IGNhcmRNb2RhbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fcG9zdC1idG5cIik7XG5jb25zdCBlZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIik7XG5jb25zdCBwcm9maWxlQ2xvc2VCdXR0b24gPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5jb25zdCBlZGl0TW9kYWxOYW1lSW5wdXQgPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNuYW1lXCIpO1xuY29uc3QgZWRpdE1vZGFsRGVzY3JpcHRpb24gPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNkZXNjcmlwdGlvblwiKTtcbmNvbnN0IGVkaXRGb3JtRWxlbWVudCA9IGVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpO1xuY29uc3QgY2FyZHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcbmNvbnN0IGNhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XG5jb25zdCBjYXJkTW9kYWxDbG9zZUJ1dHRvbiA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XG5jb25zdCBjYXJkU3VibWl0QnV0dG9uID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmUtYnRuXCIpO1xuY29uc3QgY2FyZE1vZGFsRm9ybSA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgY2FyZExpbmtJbnB1dCA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWxpbmtcIik7XG5jb25zdCBjYXJkTmFtZUlucHV0ID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjY2FwdGlvblwiKTtcbmNvbnN0IG1vZGFsUHJldmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtcHJldmlld1wiKTtcbmNvbnN0IHByZXZpZXdNb2RhbEltYWdlID0gbW9kYWxQcmV2aWV3LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuY29uc3QgcHJldmlld01vZGFsQ2FwdGlvbiA9IG1vZGFsUHJldmlldy5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuY29uc3QgcHJldmlld01vZGFsQ2xvc2UgPSBtb2RhbFByZXZpZXcucXVlcnlTZWxlY3RvcihcbiAgXCIubW9kYWxfX2Nsb3NlLWJ0bl9wcmV2aWV3XCJcbik7XG5cbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KGRhdGEpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUuY29udGVudFxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAuY2xvbmVOb2RlKHRydWUpO1xuICBjb25zdCBjYXJkTmFtZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG4gIGNvbnN0IGNhcmRJbWFnZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gIGNvbnN0IGNhcmRMaWtlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ0blwiKTtcbiAgY29uc3QgY2FyZERlbGV0ZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ0blwiKTtcblxuICBjYXJkTmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgY2FyZEltYWdlLnNyYyA9IGRhdGEubGluaztcbiAgY2FyZEltYWdlLmFsdCA9IGRhdGEubmFtZTtcblxuICBjYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ0bl9saWtlZFwiKTtcbiAgfSk7XG5cbiAgY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgb3Blbk1vZGFsKG1vZGFsUHJldmlldyk7XG4gICAgcHJldmlld01vZGFsSW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xuICAgIHByZXZpZXdNb2RhbENhcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgcHJldmlld01vZGFsSW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xuICB9KTtcblxuICBjYXJkRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gIH0pO1xuXG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRXNjYXBlS2V5KGV2dCkge1xuICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgIGNvbnN0IGFjdGl2ZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9vcGVuZWRcIik7XG4gICAgaWYgKGFjdGl2ZU1vZGFsKSBjbG9zZU1vZGFsKGFjdGl2ZU1vZGFsKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVDbGlja092ZXJsYXkoZXZ0KSB7XG4gIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xuICAgIGNsb3NlTW9kYWwoZXZ0LnRhcmdldCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZUtleSk7XG4gIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlQ2xpY2tPdmVybGF5KTtcbn1cblxuZnVuY3Rpb24gY2xvc2VNb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NhcGVLZXkpO1xuICBtb2RhbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZUNsaWNrT3ZlcmxheSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBlZGl0TW9kYWxOYW1lSW5wdXQudmFsdWU7XG4gIGRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZWRpdE1vZGFsRGVzY3JpcHRpb24udmFsdWU7XG4gIGNsb3NlTW9kYWwoZWRpdE1vZGFsKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWRkTmV3Q2FyZChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IGlucHV0VmFsdWVzID0geyBuYW1lOiBjYXJkTmFtZUlucHV0LnZhbHVlLCBsaW5rOiBjYXJkTGlua0lucHV0LnZhbHVlIH07XG4gIGNvbnN0IGNhcmRFbCA9IGdldENhcmRFbGVtZW50KGlucHV0VmFsdWVzKTtcbiAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZEVsKTtcbiAgZXZ0LnRhcmdldC5yZXNldCgpO1xuICBkaXNhYmxlQnV0dG9uKGNhcmRTdWJtaXRCdXR0b24sIHNldHRpbmdzKTtcbiAgY2xvc2VNb2RhbChjYXJkTW9kYWwpO1xufVxuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBlZGl0TW9kYWxOYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlTmFtZS50ZXh0Q29udGVudDtcbiAgZWRpdE1vZGFsRGVzY3JpcHRpb24udmFsdWUgPSBkZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcbiAgb3Blbk1vZGFsKGVkaXRNb2RhbCk7XG4gIHJlc2V0VmFsaWRhdGlvbihcbiAgICBlZGl0Rm9ybUVsZW1lbnQsXG4gICAgW2VkaXRNb2RhbE5hbWVJbnB1dCwgZWRpdE1vZGFsRGVzY3JpcHRpb25dLFxuICAgIHNldHRpbmdzXG4gICk7XG59KTtcblxucHJvZmlsZUNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwoZWRpdE1vZGFsKTtcbn0pO1xuZWRpdEZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xuY2FyZE1vZGFsRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUFkZE5ld0NhcmQpO1xuXG5jYXJkTW9kYWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgb3Blbk1vZGFsKGNhcmRNb2RhbCk7XG59KTtcbmNhcmRNb2RhbENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwoY2FyZE1vZGFsKTtcbn0pO1xucHJldmlld01vZGFsQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChtb2RhbFByZXZpZXcpO1xufSk7XG5cbmluaXRpYWxDYXJkcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoaXRlbSk7XG4gIGNhcmRzTGlzdC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbn0pO1xuXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcbiJdLCJuYW1lcyI6WyJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaGlkZUlucHV0RXJyb3IiLCJmb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsImNvbmZpZyIsImVycm9yTXNnRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRleHRDb250ZW50IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJidXR0b25FbGVtZW50Iiwic29tZSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhc0ludmFsaWRJbnB1dCIsImRpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsImFkZCIsImVuYWJsZVZhbGlkYXRpb24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJBcnJheSIsImZyb20iLCJhZGRFdmVudExpc3RlbmVyIiwiY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInByb2ZpbGVFZGl0QnV0dG9uIiwiY2FyZE1vZGFsQnV0dG9uIiwiZWRpdE1vZGFsIiwicHJvZmlsZUNsb3NlQnV0dG9uIiwicHJvZmlsZU5hbWUiLCJkZXNjcmlwdGlvbiIsImVkaXRNb2RhbE5hbWVJbnB1dCIsImVkaXRNb2RhbERlc2NyaXB0aW9uIiwiZWRpdEZvcm1FbGVtZW50IiwiY2FyZFRlbXBsYXRlIiwiY2FyZHNMaXN0IiwiY2FyZE1vZGFsIiwiY2FyZE1vZGFsQ2xvc2VCdXR0b24iLCJjYXJkU3VibWl0QnV0dG9uIiwiY2FyZE1vZGFsRm9ybSIsImNhcmRMaW5rSW5wdXQiLCJjYXJkTmFtZUlucHV0IiwibW9kYWxQcmV2aWV3IiwicHJldmlld01vZGFsSW1hZ2UiLCJwcmV2aWV3TW9kYWxDYXB0aW9uIiwicHJldmlld01vZGFsQ2xvc2UiLCJnZXRDYXJkRWxlbWVudCIsImRhdGEiLCJjYXJkRWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkTmFtZSIsImNhcmRJbWFnZSIsImNhcmRMaWtlQnV0dG9uIiwiY2FyZERlbGV0ZUJ1dHRvbiIsIm5hbWUiLCJzcmMiLCJsaW5rIiwiYWx0IiwidG9nZ2xlIiwib3Blbk1vZGFsIiwiaGFuZGxlRXNjYXBlS2V5IiwiZXZ0Iiwia2V5IiwiYWN0aXZlTW9kYWwiLCJjbG9zZU1vZGFsIiwiaGFuZGxlQ2xpY2tPdmVybGF5IiwidGFyZ2V0IiwiY29udGFpbnMiLCJtb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZXNldFZhbGlkYXRpb24iLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwiY2FyZEVsIiwicHJlcGVuZCIsInJlc2V0IiwiaXRlbSJdLCJzb3VyY2VSb290IjoiIn0=