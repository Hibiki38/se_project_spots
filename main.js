!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-btn",inactiveButtonClass:"modal__save-btn_grey_out",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},t=(e,t,r)=>{const o=e.querySelector(`#${t.id}-error`);t.classList.remove(r.inputErrorClass),o&&(o.textContent="")},r=(e,t,r)=>{(e=>e.some((e=>!e.validity.valid)))(e)?o(t,r):(t.disabled=!1,t.classList.remove(r.inactiveButtonClass))},o=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},n=e=>{document.querySelectorAll(e.formSelector).forEach((o=>{((e,o)=>{const n=Array.from(e.querySelectorAll(o.inputSelector)),a=e.querySelector(o.submitButtonSelector);r(n,a,o),n.forEach((s=>{s.addEventListener("input",(()=>{((e,r,o)=>{r.validity.valid?t(e,r,o):((e,t,r,o)=>{const n=e.querySelector(`#${t.id}-error`);n&&(t.classList.add(o.inputErrorClass),n.textContent=r)})(e,r,r.validationMessage,o)})(e,s,o),r(n,a,o)}))}))})(o,e)}))};n(e);function a(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Save",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Saving...";e.textContent=t?o:r}const s=document.querySelector("#edit-modal"),c=s.querySelector("#name"),l=s.querySelector("#description"),d=s.querySelector(".modal__form"),i=document.querySelector(".profile__edit-btn"),u=document.querySelector(".profile__avatar"),m=document.querySelector(".profile__avatar-btn"),_=s.querySelector(".modal__close-btn"),h=document.querySelector(".profile__name"),v=document.querySelector(".profile__post-btn"),y=document.querySelector(".profile__description"),f=document.querySelector("#card-template"),S=document.querySelector(".cards__list"),b=document.querySelector("#add-card-modal"),p=b.querySelector(".modal__close-btn"),q=b.querySelector(".modal__save-btn"),E=b.querySelector(".modal__form"),k=b.querySelector("#add-card-link"),L=b.querySelector("#caption");let C,g;const $=document.querySelector("#modal-preview"),j=$.querySelector(".modal__image"),U=$.querySelector(".modal__caption"),x=$.querySelector(".modal__close-btn_preview"),P=document.querySelector("#avatar-modal"),I=P.querySelector(".modal__close-btn"),w=P.querySelector(".modal__save-btn"),A=P.querySelector(".modal__form"),D=P.querySelector("#edit-avatar"),T=document.querySelector("#delete-modal"),N=T.querySelector(".modal__form"),B=T.querySelector(".modal__close-btn"),O=T.querySelector(".modal__save-btn_cancel"),J=new class{constructor(e){let{baseUrl:t,headers:r}=e;this._baseUrl=t,this._headers=r}getAppInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}editUserInfo(e){let{name:t,about:r}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}editAvatarInfo(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}addNewCard(e){let{name:t,link:r}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}handleLike(e,t){const r=t?"DELETE":"PUT";return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:r,headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"db30717b-53e5-4eba-bda7-e732eff00e8d","Content-Type":"application/json"}});function H(e){const t=f.content.querySelector(".card").cloneNode(!0),r=t.querySelector(".card__title"),o=t.querySelector(".card__image"),n=t.querySelector(".card__like-btn"),a=t.querySelector(".card__delete-btn");return e.isLiked&&n.classList.add("card__like-btn_liked"),r.textContent=e.name,o.src=e.link,o.alt=e.name,n.addEventListener("click",(t=>function(e,t){const r=e.target.classList.contains("card__like-btn_liked");J.handleLike(t,r).then((t=>{e.target.classList.toggle("card__like-btn_liked",t.isLiked)})).catch(console.error)}(t,e._id))),o.addEventListener("click",(()=>{F($),j.src=e.link,U.textContent=e.name,j.alt=e.name})),a.addEventListener("click",(()=>{!function(e,t){C=e,g=t,F(T)}(t,e._id),g=e._id})),t}function z(e){if("Escape"===e.key){const e=document.querySelector(".modal_opened");e&&G(e)}}function M(e){e.target.classList.contains("modal_opened")&&G(e.target)}function F(e){e.classList.add("modal_opened"),document.addEventListener("keydown",z),e.addEventListener("mousedown",M)}function G(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",z),e.removeEventListener("mousedown",M)}J.getAppInfo().then((e=>{let[t,r]=e;console.log(t),t.forEach((e=>{const t=H(e);S.prepend(t)})),h.textContent=r.name,y.textContent=r.description,u.src=r.avatar})).catch((e=>{console.error(e)})),i.addEventListener("click",(()=>{var r,o;c.value=h.textContent,l.value=y.textContent,F(s),r=d,o=e,[c,l].forEach((e=>{t(r,e,o)}))})),_.addEventListener("click",(()=>{G(s)})),d.addEventListener("submit",(function(e){e.preventDefault();const t=e.submitter;a(t,!0),J.editUserInfo({name:c.value,about:l.value}).then((e=>{h.textContent=e.name,y.textContent=e.about,G(s)})).catch(console.error).finally((()=>{a(t,!1)}))})),E.addEventListener("submit",(function(t){t.preventDefault();const r={name:L.value,link:k.value},n=t.submitter;a(n,!0),J.addNewCard(r).then((r=>{const n=H(r);S.prepend(n),t.target.reset(),o(q,e),G(b)})).catch((e=>{console.error(e)})).finally((()=>{a(n,!1)}))})),v.addEventListener("click",(()=>{F(b)})),p.addEventListener("click",(()=>{G(b)})),x.addEventListener("click",(()=>{G($)})),m.addEventListener("click",(()=>{F(P)})),I.addEventListener("click",(()=>{G(P)})),B.addEventListener("click",(()=>{G(T)})),O.addEventListener("click",(()=>{G(T)})),A.addEventListener("submit",(function(t){t.preventDefault();const r=t.submitter;a(r,!0),J.editAvatarInfo(D.value).then((t=>{u.src=t.avatar,G(P),A.reset(),o(w,e)})).catch(console.error).finally(r,!1)})),N.addEventListener("submit",(function(e){e.preventDefault();const t=e.submitter;!function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Delete",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Deleting...";e.textContent=t?o:r}(t,!0),J.deleteCard(g).then((()=>{C.remove(),G(T)})).catch((e=>{console.error(e)})).finally(t,!1)})),n(e)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQVksSUFFeEJ3RCxPQUFPb0IsSUFDTm5CLFFBQVFDLE1BQU1rQixFQUFJLElBRW5CTSxRQUFRRixHQUFXLEVBQ3hCLElBc0RBbEksRUFBaUI1QixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy91dGlscy9oZWxwZXJzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy91dGlscy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3NhdmUtYnRuXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3NhdmUtYnRuX2dyZXlfb3V0XCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvclwiLFxufTtcblxuY29uc3Qgc2hvd0lucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JNc2dFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgKTtcbiAgaWYgKGVycm9yTXNnRWxlbWVudCkge1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTXNnRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgfVxufTtcblxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yTXNnRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICk7XG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICBpZiAoZXJyb3JNc2dFbGVtZW50KSB7XG4gICAgZXJyb3JNc2dFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxufTtcblxuY29uc3QgY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgIHNob3dJbnB1dEVycm9yKFxuICAgICAgZm9ybUVsZW1lbnQsXG4gICAgICBpbnB1dEVsZW1lbnQsXG4gICAgICBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UsXG4gICAgICBjb25maWdcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XG4gIH1cbn07XG5cbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dCkgPT4ge1xuICAgIHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWQ7XG4gIH0pO1xufTtcblxuY29uc3QgdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpID0+IHtcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgZGlzYWJsZUJ1dHRvbihidXR0b25FbGVtZW50LCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZGlzYWJsZUJ1dHRvbiA9IChidXR0b25FbGVtZW50LCBjb25maWcpID0+IHtcbiAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVzZXRWYWxpZGF0aW9uID0gKGZvcm1FbGVtZW50LCBpbnB1dExpc3QsIGNvbmZpZykgPT4ge1xuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXQsIGNvbmZpZyk7XG4gIH0pO1xufTtcblxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpXG4gICk7XG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3Rvcik7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQsIGNvbmZpZyk7XG4gIH0pO1xufTtcblxuZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7XG4iLCJleHBvcnQgZnVuY3Rpb24gc2V0QnV0dG9udGV4dChcbiAgYnRuLFxuICBpc0xvYWRpbmcsXG4gIGRlZmF1bHRUZXh0ID0gXCJTYXZlXCIsXG4gIGxvYWRpbmdUZXh0ID0gXCJTYXZpbmcuLi5cIlxuKSB7XG4gIGlmIChpc0xvYWRpbmcpIHtcbiAgICBidG4udGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dDtcbiAgfSBlbHNlIHtcbiAgICBidG4udGV4dENvbnRlbnQgPSBkZWZhdWx0VGV4dDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0RGVsZXRlQnV0dG9udGV4dChcbiAgYnRuLFxuICBpc0RlbGV0aW5nLFxuICBkZWZhdWx0VGV4dCA9IFwiRGVsZXRlXCIsXG4gIGRlbGV0aW5nVGV4dCA9IFwiRGVsZXRpbmcuLi5cIlxuKSB7XG4gIGlmIChpc0RlbGV0aW5nKSB7XG4gICAgYnRuLnRleHRDb250ZW50ID0gZGVsZXRpbmdUZXh0O1xuICB9IGVsc2Uge1xuICAgIGJ0bi50ZXh0Q29udGVudCA9IGRlZmF1bHRUZXh0O1xuICB9XG59XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG5pbXBvcnQge1xuICBlbmFibGVWYWxpZGF0aW9uLFxuICBzZXR0aW5ncyxcbiAgcmVzZXRWYWxpZGF0aW9uLFxuICBkaXNhYmxlQnV0dG9uLFxufSBmcm9tIFwiLi4vc2NyaXB0cy92YWxpZGF0aW9uLmpzXCI7XG5cbmltcG9ydCBBcGkgZnJvbSBcIi4uL3V0aWxzL0FwaS5qc1wiO1xuXG5pbXBvcnQgeyBzZXRCdXR0b250ZXh0LCBzZXREZWxldGVCdXR0b250ZXh0IH0gZnJvbSBcIi4uL3V0aWxzL2hlbHBlcnMuanNcIjtcblxuY29uc3QgZWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LW1vZGFsXCIpO1xuY29uc3QgZWRpdE1vZGFsTmFtZUlucHV0ID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZVwiKTtcbmNvbnN0IGVkaXRNb2RhbERlc2NyaXB0aW9uID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjZGVzY3JpcHRpb25cIik7XG5jb25zdCBlZGl0Rm9ybUVsZW1lbnQgPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcblxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuXCIpO1xuY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyXCIpO1xuY29uc3QgYXZhdGFyTW9kYWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1idG5cIik7XG5jb25zdCBwcm9maWxlQ2xvc2VCdXR0b24gPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBjYXJkTW9kYWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3Bvc3QtYnRuXCIpO1xuY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIik7XG5jb25zdCBjYXJkc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuY29uc3QgY2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcbmNvbnN0IGNhcmRNb2RhbENsb3NlQnV0dG9uID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcbmNvbnN0IGNhcmRTdWJtaXRCdXR0b24gPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc2F2ZS1idG5cIik7XG5jb25zdCBjYXJkTW9kYWxGb3JtID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBjYXJkTGlua0lucHV0ID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbGlua1wiKTtcbmNvbnN0IGNhcmROYW1lSW5wdXQgPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNjYXB0aW9uXCIpO1xubGV0IHNlbGVjdGVkQ2FyZDtcbmxldCBzZWxlY3RlZENhcmRJZDtcblxuY29uc3QgbW9kYWxQcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1wcmV2aWV3XCIpO1xuY29uc3QgcHJldmlld01vZGFsSW1hZ2UgPSBtb2RhbFByZXZpZXcucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG5jb25zdCBwcmV2aWV3TW9kYWxDYXB0aW9uID0gbW9kYWxQcmV2aWV3LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XG5jb25zdCBwcmV2aWV3TW9kYWxDbG9zZSA9IG1vZGFsUHJldmlldy5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9fY2xvc2UtYnRuX3ByZXZpZXdcIlxuKTtcblxuY29uc3QgYXZhdGFyTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2F2YXRhci1tb2RhbFwiKTtcbmNvbnN0IGF2YXRhck1vZGFsQ2xvc2VCdXR0b24gPSBhdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XG5jb25zdCBhdmF0YXJTdWJtaXRCdXR0b24gPSBhdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlLWJ0blwiKTtcbmNvbnN0IGF2YXRhck1vZGFsRm9ybSA9IGF2YXRhck1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBhdmF0YXJMaW5rSW5wdXQgPSBhdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtYXZhdGFyXCIpO1xuXG5jb25zdCBkZWxldGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVsZXRlLW1vZGFsXCIpO1xuY29uc3QgZGVsZXRlRm9ybSA9IGRlbGV0ZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBkZWxldGVDbG9zZUJ1dHRvbiA9IGRlbGV0ZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcbmNvbnN0IGNhbmNlbERlbGV0ZUJ1dHRvbiA9IGRlbGV0ZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmUtYnRuX2NhbmNlbFwiKTtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiZGIzMDcxN2ItNTNlNS00ZWJhLWJkYTctZTczMmVmZjAwZThkXCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuYXBpXG4gIC5nZXRBcHBJbmZvKClcbiAgLnRoZW4oKFtjYXJkcywgdXNlcnNdKSA9PiB7XG4gICAgY29uc29sZS5sb2coY2FyZHMpO1xuICAgIGNhcmRzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoaXRlbSk7XG4gICAgICBjYXJkc0xpc3QucHJlcGVuZChjYXJkRWxlbWVudCk7XG4gICAgfSk7XG4gICAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSB1c2Vycy5uYW1lO1xuICAgIGRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdXNlcnMuZGVzY3JpcHRpb247XG4gICAgcHJvZmlsZUF2YXRhci5zcmMgPSB1c2Vycy5hdmF0YXI7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9KTtcblxuZnVuY3Rpb24gZ2V0Q2FyZEVsZW1lbnQoZGF0YSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jb250ZW50XG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIGNvbnN0IGNhcmROYW1lID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgY29uc3QgY2FyZEltYWdlID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgY29uc3QgY2FyZExpa2VCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnRuXCIpO1xuICBjb25zdCBjYXJkRGVsZXRlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnRuXCIpO1xuXG4gIGlmIChkYXRhLmlzTGlrZWQpIHtcbiAgICBjYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idG5fbGlrZWRcIik7XG4gIH1cblxuICBjYXJkTmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgY2FyZEltYWdlLnNyYyA9IGRhdGEubGluaztcbiAgY2FyZEltYWdlLmFsdCA9IGRhdGEubmFtZTtcblxuICBjYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT5cbiAgICBoYW5kbGVJc0xpa2VkKGV2dCwgZGF0YS5faWQpXG4gICk7XG5cbiAgY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgb3Blbk1vZGFsKG1vZGFsUHJldmlldyk7XG4gICAgcHJldmlld01vZGFsSW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xuICAgIHByZXZpZXdNb2RhbENhcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgcHJldmlld01vZGFsSW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xuICB9KTtcblxuICBjYXJkRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgaGFuZGxlRGVsZXRlQ2FyZChjYXJkRWxlbWVudCwgZGF0YS5faWQpO1xuICAgIHNlbGVjdGVkQ2FyZElkID0gZGF0YS5faWQ7XG4gIH0pO1xuXG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gaGFuZGxlSXNMaWtlZChldnQsIGlkKSB7XG4gIGNvbnN0IGlzTGlrZWQgPSBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImNhcmRfX2xpa2UtYnRuX2xpa2VkXCIpO1xuICBhcGlcbiAgICAuaGFuZGxlTGlrZShpZCwgaXNMaWtlZClcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idG5fbGlrZWRcIiwgZGF0YS5pc0xpa2VkKTtcbiAgICB9KVxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRXNjYXBlS2V5KGV2dCkge1xuICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgIGNvbnN0IGFjdGl2ZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9vcGVuZWRcIik7XG4gICAgaWYgKGFjdGl2ZU1vZGFsKSBjbG9zZU1vZGFsKGFjdGl2ZU1vZGFsKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVDbGlja092ZXJsYXkoZXZ0KSB7XG4gIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xuICAgIGNsb3NlTW9kYWwoZXZ0LnRhcmdldCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZUtleSk7XG4gIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlQ2xpY2tPdmVybGF5KTtcbn1cblxuZnVuY3Rpb24gY2xvc2VNb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NhcGVLZXkpO1xuICBtb2RhbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZUNsaWNrT3ZlcmxheSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3Qgc3VibWl0QnRuID0gZXZ0LnN1Ym1pdHRlcjtcbiAgc2V0QnV0dG9udGV4dChzdWJtaXRCdG4sIHRydWUpO1xuICBhcGlcbiAgICAuZWRpdFVzZXJJbmZvKHtcbiAgICAgIG5hbWU6IGVkaXRNb2RhbE5hbWVJbnB1dC52YWx1ZSxcbiAgICAgIGFib3V0OiBlZGl0TW9kYWxEZXNjcmlwdGlvbi52YWx1ZSxcbiAgICB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICAgIGRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcbiAgICAgIGNsb3NlTW9kYWwoZWRpdE1vZGFsKTtcbiAgICB9KVxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHNldEJ1dHRvbnRleHQoc3VibWl0QnRuLCBmYWxzZSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUFkZE5ld0NhcmQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBpbnB1dFZhbHVlcyA9IHsgbmFtZTogY2FyZE5hbWVJbnB1dC52YWx1ZSwgbGluazogY2FyZExpbmtJbnB1dC52YWx1ZSB9O1xuICBjb25zdCBzdWJtaXRCdG4gPSBldnQuc3VibWl0dGVyO1xuICBzZXRCdXR0b250ZXh0KHN1Ym1pdEJ0biwgdHJ1ZSk7XG4gIGFwaVxuICAgIC5hZGROZXdDYXJkKGlucHV0VmFsdWVzKVxuICAgIC50aGVuKChjYXJkRGF0YSkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsID0gZ2V0Q2FyZEVsZW1lbnQoY2FyZERhdGEpO1xuICAgICAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZEVsKTtcbiAgICAgIGV2dC50YXJnZXQucmVzZXQoKTtcbiAgICAgIGRpc2FibGVCdXR0b24oY2FyZFN1Ym1pdEJ1dHRvbiwgc2V0dGluZ3MpO1xuICAgICAgY2xvc2VNb2RhbChjYXJkTW9kYWwpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHNldEJ1dHRvbnRleHQoc3VibWl0QnRuLCBmYWxzZSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUF2YXRhclN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IHN1Ym1pdEJ0biA9IGV2dC5zdWJtaXR0ZXI7XG4gIHNldEJ1dHRvbnRleHQoc3VibWl0QnRuLCB0cnVlKTtcbiAgYXBpXG4gICAgLmVkaXRBdmF0YXJJbmZvKGF2YXRhckxpbmtJbnB1dC52YWx1ZSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgcHJvZmlsZUF2YXRhci5zcmMgPSBkYXRhLmF2YXRhcjtcbiAgICAgIGNsb3NlTW9kYWwoYXZhdGFyTW9kYWwpO1xuICAgICAgYXZhdGFyTW9kYWxGb3JtLnJlc2V0KCk7XG4gICAgICBkaXNhYmxlQnV0dG9uKGF2YXRhclN1Ym1pdEJ1dHRvbiwgc2V0dGluZ3MpO1xuICAgIH0pXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXG4gICAgLmZpbmFsbHkoc3VibWl0QnRuLCBmYWxzZSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZVN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IHN1Ym1pdEJ0biA9IGV2dC5zdWJtaXR0ZXI7XG4gIHNldERlbGV0ZUJ1dHRvbnRleHQoc3VibWl0QnRuLCB0cnVlKTtcbiAgYXBpXG4gICAgLmRlbGV0ZUNhcmQoc2VsZWN0ZWRDYXJkSWQpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgc2VsZWN0ZWRDYXJkLnJlbW92ZSgpO1xuICAgICAgY2xvc2VNb2RhbChkZWxldGVNb2RhbCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoc3VibWl0QnRuLCBmYWxzZSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNhcmQoY2FyZEVsZW1lbnQsIGNhcmRJZCkge1xuICBzZWxlY3RlZENhcmQgPSBjYXJkRWxlbWVudDtcbiAgc2VsZWN0ZWRDYXJkSWQgPSBjYXJkSWQ7XG4gIG9wZW5Nb2RhbChkZWxldGVNb2RhbCk7XG59XG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGVkaXRNb2RhbE5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xuICBlZGl0TW9kYWxEZXNjcmlwdGlvbi52YWx1ZSA9IGRlc2NyaXB0aW9uLnRleHRDb250ZW50O1xuICBvcGVuTW9kYWwoZWRpdE1vZGFsKTtcbiAgcmVzZXRWYWxpZGF0aW9uKFxuICAgIGVkaXRGb3JtRWxlbWVudCxcbiAgICBbZWRpdE1vZGFsTmFtZUlucHV0LCBlZGl0TW9kYWxEZXNjcmlwdGlvbl0sXG4gICAgc2V0dGluZ3NcbiAgKTtcbn0pO1xuXG5wcm9maWxlQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChlZGl0TW9kYWwpO1xufSk7XG5lZGl0Rm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XG5jYXJkTW9kYWxGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQWRkTmV3Q2FyZCk7XG5cbmNhcmRNb2RhbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBvcGVuTW9kYWwoY2FyZE1vZGFsKTtcbn0pO1xuY2FyZE1vZGFsQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChjYXJkTW9kYWwpO1xufSk7XG5wcmV2aWV3TW9kYWxDbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZU1vZGFsKG1vZGFsUHJldmlldyk7XG59KTtcblxuYXZhdGFyTW9kYWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgb3Blbk1vZGFsKGF2YXRhck1vZGFsKTtcbn0pO1xuXG5hdmF0YXJNb2RhbENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwoYXZhdGFyTW9kYWwpO1xufSk7XG5cbmRlbGV0ZUNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwoZGVsZXRlTW9kYWwpO1xufSk7XG5cbmNhbmNlbERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZU1vZGFsKGRlbGV0ZU1vZGFsKTtcbn0pO1xuXG5hdmF0YXJNb2RhbEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVBdmF0YXJTdWJtaXQpO1xuZGVsZXRlRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZURlbGV0ZVN1Ym1pdCk7XG5cbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuIiwiY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIGdldEFwcEluZm8oKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRpYWxDYXJkcygpLCB0aGlzLmdldFVzZXJJbmZvKCldKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgZWRpdFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBlZGl0QXZhdGFySW5mbyhhdmF0YXIpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXIsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBhZGROZXdDYXJkKHsgbmFtZSwgbGluayB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBoYW5kbGVMaWtlKGlkLCBpc0xpa2VkKSB7XG4gICAgY29uc3QgbWV0aG9kID0gaXNMaWtlZCA/IFwiREVMRVRFXCIgOiBcIlBVVFwiO1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBpO1xuIl0sIm5hbWVzIjpbInNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJoaWRlSW5wdXRFcnJvciIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiY29uZmlnIiwiZXJyb3JNc2dFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImlkIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidGV4dENvbnRlbnQiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0TGlzdCIsImJ1dHRvbkVsZW1lbnQiLCJzb21lIiwiaW5wdXQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiYWRkIiwiZW5hYmxlVmFsaWRhdGlvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJzZXRFdmVudExpc3RlbmVycyIsIkFycmF5IiwiZnJvbSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjaGVja0lucHV0VmFsaWRpdHkiLCJzaG93SW5wdXRFcnJvciIsImVycm9yTWVzc2FnZSIsInZhbGlkYXRpb25NZXNzYWdlIiwic2V0QnV0dG9udGV4dCIsImJ0biIsImlzTG9hZGluZyIsImRlZmF1bHRUZXh0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwibG9hZGluZ1RleHQiLCJlZGl0TW9kYWwiLCJlZGl0TW9kYWxOYW1lSW5wdXQiLCJlZGl0TW9kYWxEZXNjcmlwdGlvbiIsImVkaXRGb3JtRWxlbWVudCIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUF2YXRhciIsImF2YXRhck1vZGFsQnV0dG9uIiwicHJvZmlsZUNsb3NlQnV0dG9uIiwicHJvZmlsZU5hbWUiLCJjYXJkTW9kYWxCdXR0b24iLCJkZXNjcmlwdGlvbiIsImNhcmRUZW1wbGF0ZSIsImNhcmRzTGlzdCIsImNhcmRNb2RhbCIsImNhcmRNb2RhbENsb3NlQnV0dG9uIiwiY2FyZFN1Ym1pdEJ1dHRvbiIsImNhcmRNb2RhbEZvcm0iLCJjYXJkTGlua0lucHV0IiwiY2FyZE5hbWVJbnB1dCIsInNlbGVjdGVkQ2FyZCIsInNlbGVjdGVkQ2FyZElkIiwibW9kYWxQcmV2aWV3IiwicHJldmlld01vZGFsSW1hZ2UiLCJwcmV2aWV3TW9kYWxDYXB0aW9uIiwicHJldmlld01vZGFsQ2xvc2UiLCJhdmF0YXJNb2RhbCIsImF2YXRhck1vZGFsQ2xvc2VCdXR0b24iLCJhdmF0YXJTdWJtaXRCdXR0b24iLCJhdmF0YXJNb2RhbEZvcm0iLCJhdmF0YXJMaW5rSW5wdXQiLCJkZWxldGVNb2RhbCIsImRlbGV0ZUZvcm0iLCJkZWxldGVDbG9zZUJ1dHRvbiIsImNhbmNlbERlbGV0ZUJ1dHRvbiIsImFwaSIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImJhc2VVcmwiLCJoZWFkZXJzIiwidGhpcyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJnZXRBcHBJbmZvIiwiUHJvbWlzZSIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwicmVqZWN0Iiwic3RhdHVzIiwiZWRpdFVzZXJJbmZvIiwiX3JlZjIiLCJuYW1lIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImVkaXRBdmF0YXJJbmZvIiwiYXZhdGFyIiwiYWRkTmV3Q2FyZCIsIl9yZWYzIiwibGluayIsImRlbGV0ZUNhcmQiLCJoYW5kbGVMaWtlIiwiaXNMaWtlZCIsImF1dGhvcml6YXRpb24iLCJnZXRDYXJkRWxlbWVudCIsImRhdGEiLCJjYXJkRWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkTmFtZSIsImNhcmRJbWFnZSIsImNhcmRMaWtlQnV0dG9uIiwiY2FyZERlbGV0ZUJ1dHRvbiIsInNyYyIsImFsdCIsImV2dCIsInRhcmdldCIsImNvbnRhaW5zIiwidG9nZ2xlIiwiY2F0Y2giLCJjb25zb2xlIiwiZXJyb3IiLCJoYW5kbGVJc0xpa2VkIiwiX2lkIiwib3Blbk1vZGFsIiwiY2FyZElkIiwiaGFuZGxlRGVsZXRlQ2FyZCIsImhhbmRsZUVzY2FwZUtleSIsImtleSIsImFjdGl2ZU1vZGFsIiwiY2xvc2VNb2RhbCIsImhhbmRsZUNsaWNrT3ZlcmxheSIsIm1vZGFsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNhcmRzIiwidXNlcnMiLCJsb2ciLCJpdGVtIiwicHJlcGVuZCIsImVyciIsInJlc2V0VmFsaWRhdGlvbiIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJzdWJtaXRCdG4iLCJzdWJtaXR0ZXIiLCJmaW5hbGx5IiwiaW5wdXRWYWx1ZXMiLCJjYXJkRGF0YSIsImNhcmRFbCIsInJlc2V0IiwiaXNEZWxldGluZyIsImRlbGV0aW5nVGV4dCIsInNldERlbGV0ZUJ1dHRvbnRleHQiXSwic291cmNlUm9vdCI6IiJ9